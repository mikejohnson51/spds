<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Geography 13</title>
    <meta charset="utf-8" />
    <meta name="author" content="Mike Johnson" />
    <script src="libs/header-attrs-2.9/header-attrs.js"></script>
    <link rel="stylesheet" href="ucsb.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Geography 13
## Lecture 01: Welcome
### Mike Johnson

---




&lt;style type="text/css"&gt;
span.code {
      background:rgba(127,240,0, 0.2);
      border-radius: 5px 5px 5px 5px;
      padding-left:5px;
      padding-top:2px;
      padding-right:5px;
      padding-bottom:2px;
      color:#008000;
     }
&lt;/style&gt;

&lt;style type="text/css"&gt;
.remark-code{font-size: 100%}
&lt;/style&gt;

# Welcome to Geography 13

--

- In this course we will cover the foundations of **geoinformatics**, which is the science and technology that develops and uses information science to address the problems of geography, cartography, geoscience, science and engineering.

--

- Spatial Data Science is a subset of Data Science that focuses on the special characteristics of data to dpciment and understand know where and why things happen

--

- In this context “spatial data” refers to data about geographical locations, that is, places on earth. So to be more precise, we should speak about “geospatial” data, but we use the shorthand “spatial”.

--

- This class is also about using the power of &lt;span class = "code"&gt;*computers*&lt;/span&gt; to do things with &lt;span class = "code"&gt;geographic&lt;/span&gt; *data* in _reproducible_, _transparent_, and _creative_ ways.

---

# Why a Data Science approach?

--

&lt;center&gt;
&lt;img src="lec-img/01-jobs.png", width=65%&gt;
&lt;/center&gt;

--

- More demand

--

- More exciting opportunities

--

- "left vs right" skew

---

# This course:

- First time 13 is taught!!

--

- It is designed to support students looking for jobs in the GIS and data science profession

--

- It was designed to provide you with a strong introduction to a &lt;span class = "code"&gt;data-driven GIS mindset&lt;/span&gt; while building a strong GIS and data skillsets

--

Together, we will learn how to:

- find, explore, visualize, and analyze data,
- implement spatial ideas for analysis  
- make all of this reproducible, reusable, and shareable, 
- using R.

--

- There may be some rough patches, things may go to fast/slow...
 
--
 
- The &lt;span class = "code"&gt;more feedback you give me, the more fluid/tailored the course can be&lt;/span&gt;
 
---

# Programming:

&gt; "The purpose of programming is to **find a sequence of instructions** that will automate the performance of a task on a **computer**, to solve a given problem." 

--

**Tasks** in a geospatial context involve: 

--
.pull-left[
(1) &lt;span class = "code"&gt;_representation_&lt;/span&gt; how is a process or activity represented to understand our world

--

(2) &lt;span class = "code"&gt;_phenomena_&lt;/span&gt; (who, what)

--

(3) &lt;span class = "code"&gt;_space_&lt;/span&gt; (where)

--

(4) &lt;span class = "code"&gt;_time_&lt;/span&gt;(when)

--

(5) &lt;span class = "code"&gt;_So what_&lt;/span&gt;(why/how)
]

--
.pull-right[
&lt;img src="lec-img/01-who-what-where.png", width=65%&gt;
]

---

# Philoshophy

- Intentionally **data science** focused, &lt;span class = "code"&gt;we will code, not learn software&lt;/span&gt;. Everything you learn here can be applied in any GIS ecosystem (ArcMap, QGIS) or langugage (Python)

--

- The pace will be fast, and you will see code every day 

--

- Coding is hard, &lt;span class = "code"&gt;things "click" for people at different time&lt;/span&gt;. **We expect this!**

--

- We will expose you to a wide range of techniques, resources, and technologies to &lt;span class = "code"&gt;prepare you to grow on your own after this course&lt;/span&gt;.

--

- We (me, TAs and you) are &lt;span class = "code"&gt;all in this together&lt;/span&gt;. 

---

class: center, middle

## [Syllabus](./syllabus.html)

 <div class="row hide-if-small-screen" style="padding-top: 5%">
      <div class="col-lg-12 text-center">
        <svg width="1000" height="120">
          <line x1="0" y1="50" x2="950" y2="50" style="stroke:#003660; stroke-width:1.5" />
          <circle cx="11.5" cy="50" r="10" stroke="#003660" stroke-width="3" fill="#FEBC11" />
          <circle cx="175" cy="50" r="10" stroke="#f8f9fa" stroke-width="6" fill="#FEBC11" />
          <text text-anchor="middle" x="175" y="80" fill="black">Week 1</text>
          <text font-size="13" text-anchor="middle" x="100" y="15" fill="black">Geoinformatics & </text>
          <text font-size="13" text-anchor="middle" x="100" y="30" fill="black">Digital Data</text>

          <circle cx="375" cy="50" r="10" stroke="#f8f9fa" stroke-width="6" fill="#FEBC11" />
          <text text-anchor="middle" x="375" y="80" fill="black">Week 2</text>
          <text font-size="13" text-anchor="middle" x="275" y="15" fill="black">Data Wrangling & </text>
          <text font-size="13" text-anchor="middle" x="275" y="30" fill="black">Visualization</text>

          <circle cx="525" cy="50" r="5" stroke="#f8f9fa" stroke-width="2" fill="#FEBC11" />
          <text text-anchor="middle" x="525" y="80" fill="black">Week 3</text>
          <text font-size="13" text-anchor="middle" x="525" y="15" fill="black">Object (Vector) </text>
          <text font-size="13" text-anchor="middle" x="525" y="30" fill="black">Structures & Operations</text>

          <circle cx="650" cy="50" r="10" stroke="#f8f9fa" stroke-width="6" fill="#FEBC11" />
          <text text-anchor="middle" x="650" y="80" fill="black">Week 4</text>

          <circle cx="800" cy="50" r="5" stroke="#f8f9fa" stroke-width="2" fill="#FEBC11" />
          <text text-anchor="middle" x="800" y="80" fill="black">Week 5</text>

          <circle cx="940" cy="50" r="10" stroke="#003660" stroke-width="3" fill="#FEBC11" />
          <text text-anchor="middle" x="940" y="80" fill="black">Week 6</text>
          <text font-size="13" text-anchor="middle" x="800" y="15" fill="black">Field (Raster) </text>
          <text font-size="13" text-anchor="middle" x="800" y="30" fill="black">Structures & Operations</text>

        </svg>
      </div>
    </div>

---

# Learning Curve

&lt;img src="lec-img/01-learning-curve.png", width=65%&gt;

--

- If you stick with us, we will get you to the &lt;span class = "code"&gt;upswing of awesome&lt;/span&gt;

--

- But you must make it through hand holding, confusion, and despair 


---
# Why R

So we know we are going to program... but why R?

--

- [R](https://www.r-project.org/) is an object-oriented, functional programming language &lt;span class = "code"&gt;specifically designed to interface to other software&lt;/spa&gt;. 

--

- This is ideal for using libraries written in lower level languages like C, FORTRAN or Java. 

--

- Such libraries **will** help you avoid ‘ceiling’ imposed by GUI-based or proprietary geographic information systems. 

--

- Furthermore, R facilitates access to other languages: the packages Rcpp and reticulate enable access to C++ and Python code, for example. This means R can be used as a ‘bridge’ to a wide range of existing geospatial **programs**.

&lt;center&gt;
&lt;img src="lec-img/01-osgeo-logo.png", width=35%&gt;
&lt;/center&gt;
--

- Learning how to use the wealth of geospatial tools available from the R command line can be exciting, but creating new ones is the key to become a &lt;span class = "code"&gt;geospatial scientist rather then a "software user"&lt;/span&gt;. 

--

- That is, when programming, you are only want to be limited by you, and not the tools you use.

---

# Why r-spatial?

- Strong, dedicated, central, open development community
- `r-spatial` is improving every day and is built on the premise of leveraging external libraries like GDAL, GEOS, and PROJ.
- All of this will become more clear in lecture through out this course
---

# Are we "learning" R?

- &lt;span class = "code"&gt;*Yes.*&lt;/span&gt; You will learn R and its applications for spatial data science.

--

- &lt;span class = "code"&gt;*No.*&lt;/span&gt; We are not "teaching" R. Rather, R is one tool for dealing with spatial data. The concepts learned in this course will make you a more efficient analyst in python, ArcMap, Google Earth Engine, ect.

--

- Put another way, learning software is easy, but the concepts here ranging from project structure to analysis will serve you well.

---


# What will we do?

- Build an online presence with a compelling website

--

- Analyze Real-time NY-Times COVID data

--

- Analyze the impacts of real-world policies like the 100-mile DHS border

--

- Analyze the National Dam network and its relationship to water demand

--

- Analyze Satellite Imagery and implement a rudimentary Machine Learning Classification


--


- &lt;span class = "code"&gt;You will work at a scale that is meaningful, with real-world messy data, to ask questions that are topical&lt;/span&gt;

---

# Instructors

So, who are we?

--

- ### Mike Johnson
  - PhD in Geography @ UCSB (July 1st)
  - Lead Data Scientist for the Urban Flooding Open Knowledge Network
  - Water Resource data scientist for Lynker Technology working @ the NOAA National Water Center 

--
&lt;br&gt;&lt;br&gt;&lt;br&gt;

- ### Jiwon Baik
  - PhD Student in Geography @ UCSB
  - Operations research / spatial optimization, 
  - spatial modeling, GIS, 
  - machine learning and applied statistics.

---

# Mike's Opinions:

To be fair, you should know these things about me:

- I think R is currently the best tool for spatial data science. Others **certainly** disagree. 

--

- There are always needs for other tools (GRASS, QGIS, whitebox)

--

- Communicating results is AS IMPORTANT as the results themselves

--

- GIS is a combination of understanding our computers, data science, and geometry.
  
--

- Everyone can code and everyone will do well in this class if an honest effort is made.

--

- The world is messy, computers are black/white. This is the hardest part of GIS 

---

# Our first example:

- Lets practice! Here you are going to see some code.  
- &lt;span class = "code"&gt;Don't be intimidated by it&lt;/span&gt;, but think how it relates to how you understand the world and data you've seen before
- The idea is not to "understand" the code, but to expose the ideas we'll see soon

--

- We start with a data.frame, it might look like something you've seen in excel...


```r
data = data.frame(
  name = 'UCSB',
  type = 'University',
  location = "Goleta, CA",
  lat = 34.4140, 
  lng = -119.8489)
```


&lt;table class="table table-condensed"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; name &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; type &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; location &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lng &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; UCSB &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; University &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Goleta, CA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34.414 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -119.8489 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

count: false
 
# A Simple Map
.panel1-plot-auto[

```r
*ggplot(data)
```
]
 
.panel2-plot-auto[
&lt;img src="lecture-01_files/figure-html/plot_auto_01_output-1.png" width="432" /&gt;
]

---
count: false
 
# A Simple Map
.panel1-plot-auto[

```r
ggplot(data) +
* geom_point(aes(x = lng, y = lat), size = 4)
```
]
 
.panel2-plot-auto[
&lt;img src="lecture-01_files/figure-html/plot_auto_02_output-1.png" width="432" /&gt;
]

---
count: false
 
# A Simple Map
.panel1-plot-auto[

```r
ggplot(data) +
  geom_point(aes(x = lng, y = lat), size = 4) +
* labs(title = "UCSB Location ")
```
]
 
.panel2-plot-auto[
&lt;img src="lecture-01_files/figure-html/plot_auto_03_output-1.png" width="432" /&gt;
]

---
count: false
 
# A Simple Map
.panel1-plot-auto[

```r
ggplot(data) +
  geom_point(aes(x = lng, y = lat), size = 4) +
  labs(title = "UCSB Location ") +
* theme_bw()
```
]
 
.panel2-plot-auto[
&lt;img src="lecture-01_files/figure-html/plot_auto_04_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-plot-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-plot-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-plot-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

count: false
 
# Finding Data
.panel1-spatial-auto[

```r
*library(dplyr)
```
]
 
.panel2-spatial-auto[

]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
*library(osmdata)
```
]
 
.panel2-spatial-auto[

]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

*(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```
]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))

*(osm_data = opq(AOI) %&gt;%
* add_osm_feature (key = "building") %&gt;%
*   osmdata_sf())
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```
]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))

(osm_data = opq(AOI) %&gt;%
  add_osm_feature (key = "building") %&gt;%
    osmdata_sf())

*osm_data$osm_polygons
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```

```
Simple feature collection with 81 features and 37 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.40987 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
             osm_id                        name addr.housename addr.state alt_name    amenity bench bldg_no   building building.levels buildingty capacity
38097306   38097306                   El Centro           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;        yes            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
38099471   38099471 College of Creative Studies           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt; university            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
38140509   38140509                 Lot 18/Mesa           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    parking  &lt;NA&gt;    &lt;NA&gt;        yes            &lt;NA&gt;       &lt;NA&gt;      907
43080366   43080366              UCSB Bike Shop           &lt;NA&gt;         CA     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;     school            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
43939827   43939827                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    toilets  &lt;NA&gt;    &lt;NA&gt;        yes            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
49425354   49425354                      Lot 22           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;    parking  &lt;NA&gt;    &lt;NA&gt;        yes            &lt;NA&gt;       &lt;NA&gt;     1128
221234145 221234145                  Psychology           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt; university            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
221234146 221234146         Psychology Addition           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt; university            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
221234147 221234147                  Psychology           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt; university            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
221234879 221234879       Ortega Dining Commons           &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt; food_court  &lt;NA&gt;    &lt;NA&gt;        yes            &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;
          capacity.disabled disabled_spaces  ele  fee gnis.county_name gnis.feature_id                     gnis.import_uuid gnis.reviewed height layer leisure
38097306               &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
38099471               &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
38140509                yes            &lt;NA&gt; &lt;NA&gt;  yes             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
43080366               &lt;NA&gt;            &lt;NA&gt;   14 &lt;NA&gt;    Santa Barbara         1665582 57871b70-0100-4405-bb30-88b2e001a944            no   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
43939827               &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
49425354               &lt;NA&gt;             yes &lt;NA&gt;  yes             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
221234145              &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
221234146              &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
221234147              &lt;NA&gt;            &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
221234879              &lt;NA&gt;            &lt;NA&gt;   14 &lt;NA&gt;             &lt;NA&gt;            &lt;NA&gt;                                 &lt;NA&gt;          &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;
                     operator      parking phone  ref seats shelter_type    shop short_name        source tourism website wheelchair wikidata wikipedia
38097306                 &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
38099471                 &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt;  494  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
38140509                 &lt;NA&gt; multi-storey  &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
43080366  Associated Students         &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt; bicycle       &lt;NA&gt; USGS Geonames    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
43939827                 &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
49425354                 &lt;NA&gt; multi-storey  &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
221234145                &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt;  551  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
221234146                &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt;  251  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
221234147                &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt;  551  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;
221234879                &lt;NA&gt;         &lt;NA&gt;  &lt;NA&gt;  542  &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;        yes     &lt;NA&gt;      &lt;NA&gt;
                                geometry
38097306  POLYGON ((-119.8445 34.4143...
38099471  POLYGON ((-119.8461 34.4113...
38140509  POLYGON ((-119.8471 34.4174...
43080366  POLYGON ((-119.8493 34.4145...
43939827  POLYGON ((-119.8529 34.4177...
49425354  POLYGON ((-119.853 34.41383...
221234145 POLYGON ((-119.8448 34.4120...
221234146 POLYGON ((-119.8445 34.4122...
221234147 POLYGON ((-119.8448 34.4123...
221234879 POLYGON ((-119.8472 34.4112...
```
]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))

(osm_data = opq(AOI) %&gt;%
  add_osm_feature (key = "building") %&gt;%
    osmdata_sf())

osm_data$osm_polygons %&gt;%
* select(name)
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```

```
Simple feature collection with 81 features and 1 field
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.40987 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
                                 name                       geometry
38097306                    El Centro POLYGON ((-119.8445 34.4143...
38099471  College of Creative Studies POLYGON ((-119.8461 34.4113...
38140509                  Lot 18/Mesa POLYGON ((-119.8471 34.4174...
43080366               UCSB Bike Shop POLYGON ((-119.8493 34.4145...
43939827                         &lt;NA&gt; POLYGON ((-119.8529 34.4177...
49425354                       Lot 22 POLYGON ((-119.853 34.41383...
221234145                  Psychology POLYGON ((-119.8448 34.4120...
221234146         Psychology Addition POLYGON ((-119.8445 34.4122...
221234147                  Psychology POLYGON ((-119.8448 34.4123...
221234879       Ortega Dining Commons POLYGON ((-119.8472 34.4112...
```
]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))

(osm_data = opq(AOI) %&gt;%
  add_osm_feature (key = "building") %&gt;%
    osmdata_sf())

osm_data$osm_polygons %&gt;%
  select(name) %&gt;%
* mutate(area = sf::st_area(.))
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```

```
Simple feature collection with 81 features and 2 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.40987 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
                                 name                       geometry            area
38097306                    El Centro POLYGON ((-119.8445 34.4143...  458.2097 [m^2]
38099471  College of Creative Studies POLYGON ((-119.8461 34.4113... 1596.2803 [m^2]
38140509                  Lot 18/Mesa POLYGON ((-119.8471 34.4174... 8739.1584 [m^2]
43080366               UCSB Bike Shop POLYGON ((-119.8493 34.4145...  129.5989 [m^2]
43939827                         &lt;NA&gt; POLYGON ((-119.8529 34.4177...  120.9094 [m^2]
49425354                       Lot 22 POLYGON ((-119.853 34.41383... 5484.2148 [m^2]
221234145                  Psychology POLYGON ((-119.8448 34.4120... 1730.7990 [m^2]
221234146         Psychology Addition POLYGON ((-119.8445 34.4122...  821.4632 [m^2]
221234147                  Psychology POLYGON ((-119.8448 34.4123...  728.1013 [m^2]
221234879       Ortega Dining Commons POLYGON ((-119.8472 34.4112... 2565.3212 [m^2]
```
]

---
count: false
 
# Finding Data
.panel1-spatial-auto[

```r
library(dplyr)
library(osmdata)

(AOI = AOI::aoi_get(list(data$lat, data$lng, .5,.5)))

(osm_data = opq(AOI) %&gt;%
  add_osm_feature (key = "building") %&gt;%
    osmdata_sf())

osm_data$osm_polygons %&gt;%
  select(name) %&gt;%
  mutate(area = sf::st_area(.)) -&gt;
* buildings
```
]
 
.panel2-spatial-auto[

```
Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8533 ymin: 34.41038 xmax: -119.8445 ymax: 34.41762
Geodetic CRS:  WGS 84
                sf..st_as_sfc.x.
1 POLYGON ((-119.8533 34.4103...
```
]

&lt;style&gt;
.panel1-spatial-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-spatial-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-spatial-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;







---

count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
*ggplot(buildings)
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_01_output-1.png" width="432" /&gt;
]

---
count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
ggplot(buildings) +
* geom_sf()
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_02_output-1.png" width="432" /&gt;
]

---
count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
ggplot(buildings) +
  geom_sf() +
* geom_sf(data = slice_max(buildings, area), fill = "red")
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_03_output-1.png" width="432" /&gt;
]

---
count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
ggplot(buildings) +
  geom_sf() +
  geom_sf(data = slice_max(buildings, area), fill = "red") +
* geom_sf(data = filter(buildings, name == "Ellison Hall"), fill = "green")
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_04_output-1.png" width="432" /&gt;
]

---
count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
ggplot(buildings) +
  geom_sf() +
  geom_sf(data = slice_max(buildings, area), fill = "red") +
  geom_sf(data = filter(buildings, name == "Ellison Hall"), fill = "green") +
* labs(title = "UCSB Campus",
*      subtitle = "Green builing is Ellison Hall")
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_05_output-1.png" width="432" /&gt;
]

---
count: false
 
# A more informative map
.panel1-spatial-plot-auto[

```r
ggplot(buildings) +
  geom_sf() +
  geom_sf(data = slice_max(buildings, area), fill = "red") +
  geom_sf(data = filter(buildings, name == "Ellison Hall"), fill = "green") +
  labs(title = "UCSB Campus",
       subtitle = "Green builing is Ellison Hall") +
* theme_bw()
```
]
 
.panel2-spatial-plot-auto[
&lt;img src="lecture-01_files/figure-html/spatial-plot_auto_06_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-spatial-plot-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-spatial-plot-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-spatial-plot-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---
# Analysis

**Question**: What is the solar potential of the 25 largest buildings on UCSB's campus?

.pull-left[
&lt;img src="lec-img/01-national-solar-map.png", width=80%&gt;
]

.pull-right[
Assumptions: 
- 75% of a structure footprint can be covered with solar panel
- Goleta gets ~5 kWh/m^2^/day
- 1 kWhr = .000000010 gWhr
]
---

count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
*buildings
```
]
 
.panel2-solar-auto[

```
Simple feature collection with 81 features and 2 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.40987 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
                                 name                       geometry            area
38097306                    El Centro POLYGON ((-119.8445 34.4143...  458.2097 [m^2]
38099471  College of Creative Studies POLYGON ((-119.8461 34.4113... 1596.2803 [m^2]
38140509                  Lot 18/Mesa POLYGON ((-119.8471 34.4174... 8739.1584 [m^2]
43080366               UCSB Bike Shop POLYGON ((-119.8493 34.4145...  129.5989 [m^2]
43939827                         &lt;NA&gt; POLYGON ((-119.8529 34.4177...  120.9094 [m^2]
49425354                       Lot 22 POLYGON ((-119.853 34.41383... 5484.2148 [m^2]
221234145                  Psychology POLYGON ((-119.8448 34.4120... 1730.7990 [m^2]
221234146         Psychology Addition POLYGON ((-119.8445 34.4122...  821.4632 [m^2]
221234147                  Psychology POLYGON ((-119.8448 34.4123...  728.1013 [m^2]
221234879       Ortega Dining Commons POLYGON ((-119.8472 34.4112... 2565.3212 [m^2]
```
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
* slice_max(area, n = 25)
```
]
 
.panel2-solar-auto[

```
Simple feature collection with 25 features and 2 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.41004 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
                                    name            area                       geometry
355809608               Davidson Library 11215.993 [m^2] POLYGON ((-119.8453 34.4143...
38140509                     Lot 18/Mesa  8739.158 [m^2] POLYGON ((-119.8471 34.4174...
221241134                           &lt;NA&gt;  8411.759 [m^2] POLYGON ((-119.844 34.41641...
221404493                           &lt;NA&gt;  7495.132 [m^2] POLYGON ((-119.8467 34.4126...
221239778                        Rob Gym  6469.864 [m^2] POLYGON ((-119.8498 34.4164...
221234882       University Center (UCEN)  5987.472 [m^2] POLYGON ((-119.8472 34.4117...
221237576 Humanities and Social Sciences  5841.466 [m^2] POLYGON ((-119.8499 34.4133...
221409402                Santa Rosa Hall  5812.156 [m^2] POLYGON ((-119.8447 34.4113...
49425354                          Lot 22  5484.215 [m^2] POLYGON ((-119.853 34.41383...
221240083                           &lt;NA&gt;  4424.639 [m^2] POLYGON ((-119.8526 34.4156...
```
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
* mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010)
```
]
 
.panel2-solar-auto[

```
Simple feature collection with 25 features and 3 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -119.8532 ymin: 34.41004 xmax: -119.8438 ymax: 34.41799
Geodetic CRS:  WGS 84
First 10 features:
                                    name            area                       geometry       gWhr
355809608               Davidson Library 11215.993 [m^2] POLYGON ((-119.8453 34.4143... 0.04205997
38140509                     Lot 18/Mesa  8739.158 [m^2] POLYGON ((-119.8471 34.4174... 0.03277184
221241134                           &lt;NA&gt;  8411.759 [m^2] POLYGON ((-119.844 34.41641... 0.03154410
221404493                           &lt;NA&gt;  7495.132 [m^2] POLYGON ((-119.8467 34.4126... 0.02810675
221239778                        Rob Gym  6469.864 [m^2] POLYGON ((-119.8498 34.4164... 0.02426199
221234882       University Center (UCEN)  5987.472 [m^2] POLYGON ((-119.8472 34.4117... 0.02245302
221237576 Humanities and Social Sciences  5841.466 [m^2] POLYGON ((-119.8499 34.4133... 0.02190550
221409402                Santa Rosa Hall  5812.156 [m^2] POLYGON ((-119.8447 34.4113... 0.02179559
49425354                          Lot 22  5484.215 [m^2] POLYGON ((-119.853 34.41383... 0.02056581
221240083                           &lt;NA&gt;  4424.639 [m^2] POLYGON ((-119.8526 34.4156... 0.01659239
```
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
* solar_options
```
]
 
.panel2-solar-auto[

]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


*ggplot()
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_05_output-1.png" width="432" /&gt;
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


ggplot() +
* geom_sf(data = buildings, fill = 'gray')
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_06_output-1.png" width="432" /&gt;
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


ggplot() +
  geom_sf(data = buildings, fill = 'gray') +
* geom_sf(data = solar_options, aes(fill = gWhr))
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_07_output-1.png" width="432" /&gt;
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


ggplot() +
  geom_sf(data = buildings, fill = 'gray') +
  geom_sf(data = solar_options, aes(fill = gWhr)) +
* scale_fill_gradientn(colors = pals::parula(10))
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_08_output-1.png" width="432" /&gt;
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


ggplot() +
  geom_sf(data = buildings, fill = 'gray') +
  geom_sf(data = solar_options, aes(fill = gWhr)) +
  scale_fill_gradientn(colors = pals::parula(10)) +
* labs(title = "UCSB Solor Options")
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_09_output-1.png" width="432" /&gt;
]

---
count: false
 
# UCSB Solar
.panel1-solar-auto[

```r
buildings %&gt;%
  slice_max(area, n = 25) %&gt;%
  mutate(gWhr = 0.75 * as.numeric(area) * 5 * 0.0000010) -&gt;
  solar_options


ggplot() +
  geom_sf(data = buildings, fill = 'gray') +
  geom_sf(data = solar_options, aes(fill = gWhr)) +
  scale_fill_gradientn(colors = pals::parula(10)) +
  labs(title = "UCSB Solor Options") +
* theme_bw()
```
]
 
.panel2-solar-auto[
&lt;img src="lecture-01_files/figure-html/solar_auto_10_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-solar-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-solar-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-solar-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---
# UCSB 2018 Annual Utility and Energy Report

See [here](https://www.energy.ucsb.edu/sites/default/files/docs/UCSB_Annual_Energy_Utility_Report_2018.pdf)

.pull-left[
&lt;img src="lec-img/01-ucsb-solar-costs.png", width=50%&gt;
]
--

.pull-right[

```r
sum(solar_options$gWh)
```

```
[1] 0.4319673
```
]

---

class: center, middle

# Assignment: [Set up R and Rstudio](01-assignment.html)

---
class: center, middle
# END


&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 65%}
&lt;/style&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
